name: Expo Build
on:
	push:
		branches:
			- main
			- master
	workflow_dispatch:
jobs:
	build-and-publish-app:
		name: Build and publish
		runs-on: ubuntu-latest
		steps:
			- name: ğŸ—ï¸ Setup repo
				uses: actions/checkout@v3

			- name: ğŸ—ï¸ Setup Node
				uses: actions/setup-node@v3
				with:
					node-version: 16.x
					cache: npm

			- name: ğŸ—ï¸ Setup Expo and EAS
				uses: expo/expo-github-action@v7
				with:
					expo-version: latest
					eas-version: latest
					token: ${{ secrets.EXPO_TOKEN }}

			- name: ğŸ“¦ Install dependencies
				run: npm install

			- name: ğŸš€ Build app
				run: eas build --non-interactive

			- name: ğŸš€ Publish app
				run: expo publish --non-interactive
